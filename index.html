<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üá≤üáΩ Selfies que dan vida - PRO</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
<style>
  * { box-sizing: border-box; margin: 0; padding: 0; }
  body { font-family: 'Roboto', sans-serif; background: #f0f2f5; color: #333; }
  header {
    background: #e53935;
    color: white;
    text-align: center;
    padding: 1.5rem 1rem;
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
  }
  header h1 { font-size: 2rem; }

  main { max-width: 900px; margin: 2rem auto; padding: 1rem; }

  section {
    background: white;
    border-radius: 20px;
    padding: 1.5rem;
    margin-bottom: 2rem;
    box-shadow: 0 8px 20px rgba(0,0,0,0.1);
    transition: 0.3s;
  }
  section:hover { box-shadow: 0 10px 25px rgba(0,0,0,0.15); }

  h2 { font-size: 1.6rem; margin-bottom: 1rem; color: #e53935; }

  label { display: block; margin-bottom: 0.3rem; font-weight: 500; }
  input[type="file"], input[type="text"], button {
    width: 100%; padding: 0.75rem; margin-bottom: 1rem;
    border-radius: 12px; border: 1px solid #ccc; font-size: 1rem; outline: none;
    transition: 0.3s;
  }
  input[type="file"]:hover, input[type="text"]:hover { border-color: #e53935; }

  button {
    background: #e53935; color: white; font-weight: 600;
    border: none; cursor: pointer; transition: 0.3s;
    border-radius: 12px;
  }
  button:hover { background: #b71c1c; }

  canvas {
    display: block; margin: 1rem auto; border-radius: 20px;
    max-width: 100%; box-shadow: 0 6px 15px rgba(0,0,0,0.1);
  }

  .share-buttons { display: flex; gap: 1rem; flex-wrap: wrap; margin-top: 0.5rem; }
  .share-buttons button { flex: 1; font-size: 0.95rem; }

  .donate-section p { margin-bottom: 0.5rem; line-height: 1.3; }

  @media (max-width: 600px) {
    header h1 { font-size: 1.6rem; }
    .share-buttons { flex-direction: column; }
  }
</style>
</head>
<body>

<header>
  <h1>üá≤üáΩ Selfies que dan vida</h1>
</header>

<main>
  <!-- 1Ô∏è‚É£ Selecci√≥n de foto -->
  <section>
    <h2>1Ô∏è‚É£ Selecciona tu foto</h2>
    <label for="photoInput">Sube tu selfie o imagen</label>
    <input type="file" id="photoInput" accept="image/*" capture="user">
    <canvas id="photoCanvas"></canvas>
  </section>

  <!-- 2Ô∏è‚É£ Agregar marco y mensaje -->
  <section>
    <h2>2Ô∏è‚É£ Personaliza tu marco</h2>
    <label for="locationInput">DESDE:</label>
    <input type="text" id="locationInput" placeholder="Escribe tu ubicaci√≥n">

    <label for="customText">Escribe tu mensaje solidario:</label>
    <input type="text" id="customText" placeholder="Ej. ¬°Unidos con el #NorteDeVeracruz!">

    <label>Elige un marco gr√°fico:</label>
    <div class="frame-options">
      <!-- Puedes agregar tus propias im√°genes PNG de marcos -->
      <img src="https://i.imgur.com/3Lk3wQI.png" alt="Marco1" class="frame-choice" style="width:80px; cursor:pointer; margin-right:10px;">
      <img src="https://i.imgur.com/yrZ1wCt.png" alt="Marco2" class="frame-choice" style="width:80px; cursor:pointer; margin-right:10px;">
      <img src="https://i.imgur.com/Ys9UZ1D.png" alt="Marco3" class="frame-choice" style="width:80px; cursor:pointer; margin-right:10px;">
    </div>
  </section>

  <!-- 3Ô∏è‚É£ Guardar y compartir -->
  <section>
    <h2>3Ô∏è‚É£ Comparte tu selfie solidaria</h2>
    <button id="downloadBtn">üíæ Guardar imagen</button>
    <div class="share-buttons">
      <button id="shareWhatsapp">WhatsApp</button>
      <button id="shareTwitter">Twitter</button>
      <button id="shareFacebook">Facebook</button>
    </div>
  </section>

  <!-- 4Ô∏è‚É£ Donaci√≥n opcional -->
  <section>
    <h2>4Ô∏è‚É£ Dona directamente</h2>
    <p>Donaciones #Cruz Roja Mexicana u otra instituci√≥n confiable</p>
    <p>Cuenta: 0404040406</p>
    <p>Clave interbancaria: 012180004040404062</p>
    <p>Banco: BBVA Bancomer</p>
    <p>A nombre de: Cruz Roja Mexicana IAP</p>
    <button onclick="window.open('https://www.cruzrojamexicana.org.mx/donativos', '_blank')">Donar ahora</button>
  </section>
</main>

<script>
const photoInput = document.getElementById('photoInput');
const photoCanvas = document.getElementById('photoCanvas');
const ctx = photoCanvas.getContext('2d');
const locationInput = document.getElementById('locationInput');
const customText = document.getElementById('customText');
const downloadBtn = document.getElementById('downloadBtn');

const frameChoices = document.querySelectorAll('.frame-choice');
let currentFrame = null;
let currentImage = null;

// Cargar foto
photoInput.addEventListener('change', e => {
  const file = e.target.files[0];
  if (!file) return;
  const reader = new FileReader();
  reader.onload = function(event) {
    const img = new Image();
    img.onload = () => { currentImage = img; drawCanvas(); };
    img.src = event.target.result;
  };
  reader.readAsDataURL(file);
});

// Selecci√≥n de marco
frameChoices.forEach(img => {
  img.addEventListener('click', () => {
    currentFrame = new Image();
    currentFrame.src = img.src;
    currentFrame.onload = drawCanvas;
  });
});

// Dibujar canvas
function drawCanvas() {
  if (!currentImage) return;
  const width = Math.min(currentImage.width, 800);
  const scale = width / currentImage.width;
  const height = currentImage.height * scale;
  photoCanvas.width = width;
  photoCanvas.height = height + 160;

  // Imagen principal
  ctx.clearRect(0, 0, photoCanvas.width, photoCanvas.height);
  ctx.drawImage(currentImage, 0, 0, width, height);

  // Marco superior
  ctx.fillStyle = 'rgba(229, 57, 53, 0.85)';
  ctx.fillRect(0, 0, width, 160);

  // Texto
  ctx.fillStyle = 'white';
  ctx.font = 'bold 22px Roboto';
  ctx.textAlign = 'center';
  ctx.fillText(`DESDE: ${locationInput.value || 'Ubicaci√≥n no especificada'}`, width/2, 50);
  ctx.fillText(customText.value || 'Tu mensaje aqu√≠', width/2, 110);

  // Marco PNG
  if(currentFrame) ctx.drawImage(currentFrame, 0, 0, width, height);
}

// Actualizar texto en tiempo real
locationInput.addEventListener('input', drawCanvas);
customText.addEventListener('input', drawCanvas);

// Descargar imagen
downloadBtn.addEventListener('click', () => {
  if(!currentImage) return;
  const link = document.createElement('a');
  link.download = 'selfie-solidaria.png';
  link.href = photoCanvas.toDataURL();
  link.click();
});

// Compartir en redes sociales
function shareImage(platform) {
  const dataUrl = photoCanvas.toDataURL();
  const encoded = encodeURIComponent(dataUrl);
  let shareUrl = '';

  if(platform === 'whatsapp') {
    shareUrl = `https://api.whatsapp.com/send?text=¬°Mira mi selfie solidaria!&media=${encoded}`;
  } else if(platform === 'twitter') {
    shareUrl = `https://twitter.com/intent/tweet?text=¬°Mira mi selfie solidaria!&url=${encoded}`;
  } else if(platform === 'facebook') {
    shareUrl = `https://www.facebook.com/sharer/sharer.php?u=${encoded}`;
  }
  window.open(shareUrl, '_blank');
}

document.getElementById('shareWhatsapp').addEventListener('click', () => shareImage('whatsapp'));
document.getElementById('shareTwitter').addEventListener('click', () => shareImage('twitter'));
document.getElementById('shareFacebook').addEventListener('click', () => shareImage('facebook'));
</script>

</body>
          </html>
